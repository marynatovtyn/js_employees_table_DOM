{"version":3,"sources":["scripts/main.js"],"names":["initialValue","body","document","querySelector","table","tableBody","thead","tableHeaders","querySelectorAll","sortOrder","activeHeader","currentCell","offices","form","createElement","saveBtn","normaliseNumber","num","parseFloat","replace","createSelect","value","select","forEach","office","option","textContent","append","setAttribute","toLowerCase","required","name","notification","text","description","type","message","classList","add","innerHTML","setTimeout","remove","generateNotificationMessage","data","trim","length","position","age","salary","addDataToTable","tr","Number","toLocaleString","appendChild","editTableCell","addEventListener","e","input","editedCell","target","closest","style","width","focus","ev","key","setCellValue","tableInput","cell","inputValue","index","Array","from","parentNode","children","indexOf","checkInputValue","slice","parseInt","split","join","test","tableHeader","label","header","cellIndex","tableRows","sort","a","b","aValue","innerText","bValue","row","tableRow","preventDefault","Object","fromEntries","FormData","entries","reset"],"mappings":";AAAA,aAsTC,SAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,wIAAA,SAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,GAAA,iBAAA,EAAA,OAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,UAAA,SAAA,KAAA,GAAA,MAAA,GAAA,GAAA,MAAA,WAAA,GAAA,EAAA,cAAA,EAAA,EAAA,YAAA,MAAA,QAAA,GAAA,QAAA,EAAA,MAAA,KAAA,GAAA,cAAA,GAAA,2CAAA,KAAA,GAAA,EAAA,EAAA,QAAA,GAAA,SAAA,EAAA,GAAA,GAAA,oBAAA,QAAA,OAAA,YAAA,OAAA,GAAA,OAAA,MAAA,KAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,EAAA,GAAA,SAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,UAAA,EAAA,EAAA,QAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EApTD,IASIA,EATEC,EAAOC,SAASC,cAAc,QAC9BC,EAAQF,SAASC,cAAc,SAC/BE,EAAYD,EAAMD,cAAc,SAChCG,EAAQF,EAAMD,cAAc,SAC5BI,EAAeD,EAAME,iBAAiB,MAExCC,EAAY,EACZC,EAAe,KACfC,GAAc,EAEZC,EAAU,CAAhB,QAAA,YAAA,SAAA,WAAA,YAAA,iBASMC,EAAOX,SAASY,cAAc,QAC9BC,EAAUb,SAASY,cAAc,UAoCvC,SAASE,EAAgBC,GAChBC,OAAAA,WAAWD,EAAIE,QAAQ,IAAK,IAAIA,QAAQ,IAAK,KAgDtD,SAASC,EAAaC,GACdC,IAAAA,EAASpB,SAASY,cAAc,UAc/BQ,OAZPV,EAAQW,QAAQ,SAAAC,GACRC,IAAAA,EAASvB,SAASY,cAAc,UAEtCW,EAAOJ,MAAQG,EACfC,EAAOC,YAAcF,EACrBF,EAAOK,OAAOF,KAGhBH,EAAOM,aAAa,UAAWP,EAAMK,YAAYG,eACjDP,EAAOQ,UAAW,EAClBR,EAAOS,KAAOV,EAAMK,YAAYG,cAEzBP,EAGT,SAASU,EAAaC,EAAMC,EAAaC,GACjCC,IAAAA,EAAUlC,SAASY,cAAc,OAEvCsB,EAAQR,aAAa,UAAW,gBAChCQ,EAAQC,UAAUC,IAAI,eAAgBH,GAEtCC,EAAQG,UACAN,aAAAA,OAAAA,EACDC,kBAAAA,OAAAA,EAFP,YAKAhC,SAASD,KAAK0B,OAAOS,GAErBI,WAAW,WAAMJ,OAAAA,EAAQK,UAAU,KAGrC,SAASC,EAA4BC,GAC/BA,OAAAA,EAAKZ,KAAKa,OAAOC,OAAS,GAAKF,EAAKG,SAASF,OAAOC,OAAS,GAC/Db,EACE,QACA,uDACA,UAGK,GAGLW,EAAKI,IAAM,IAAMJ,EAAKI,IAAM,IAC9Bf,EACE,QACA,yCACA,UAGK,GAGLW,EAAKK,QAAU,GACjBhB,EACE,QACA,oCACA,UAGK,GAGJW,EAAKI,KAAQJ,EAAKK,QAUvBhB,EACE,SACA,wCACA,YAGK,IAfLA,EACE,QACA,0BACA,UAGK,GA0BX,SAASiB,EAAeN,GAChBO,IAAAA,EAAKhD,SAASY,cAAc,MAElCoC,EAAGX,UACKI,aAAAA,OAAAA,EAAKZ,KACLY,mBAAAA,OAAAA,EAAKG,SACLH,mBAAAA,OAAAA,EAAKnB,OACLmB,mBAAAA,OAAAA,EAAKI,IACJI,oBAAAA,OAAAA,OAAOR,EAAKK,QAAQI,eAAe,SAL5C,aAQA/C,EAAUgD,YAAYH,GAGxB,SAASI,IACPjD,EAAUkD,iBAAiB,WAAY,SAACC,GAChCC,IAAAA,EAAQvD,SAASY,cAAc,SAC/B4C,EAAaF,EAAEG,OAAOC,QAAQ,MAEpCH,EAAMpB,UAAUC,IAAI,cACpBmB,EAAMI,MAAMC,MAAQ,OACpB9D,EAAewD,EAAEG,OAAOjC,YACxB8B,EAAEG,OAAOjC,YAAc,GACvBf,GAAc,EACd+C,EAAWhC,YAAc,GACzBgC,EAAW/B,OAAO8B,GAClBA,EAAMM,QAENN,EAAMF,iBAAiB,UAAW,SAACS,GAClB,UAAXA,EAAGC,KACLC,EAAaT,EAAOC,KAIxBD,EAAMF,iBAAiB,OAAQ,WAC7BW,EAAaT,EAAOC,OAK1B,SAASQ,EAAaC,EAAYC,GAC5B,GAACzD,EAAD,CAIA0D,IAAAA,EAAaF,EAAW9C,MAAMuB,OAC5B0B,EAAQC,MAAMC,KAAKJ,EAAKK,WAAWC,UACtCC,QAAQP,GAMH,OAJHC,IACHA,EAAarE,IAGP,GACDsE,KAAU,IAAVA,EACC,IAACM,EAAgBP,GAOnB,YANArC,EACE,QACA,wBACA,SAMJoC,EAAK1C,YAAyC,MAA3B2C,EAAWQ,MAAM,EAAG,GAC/BC,IAAAA,OAAAA,SAAST,EACZU,MAAM,KAAKC,KAAK,IAAIH,MAAM,IAAIzB,eAAe,UAC1C0B,IAAAA,OAAAA,SAAST,EACZU,MAAM,KAAKC,KAAK,KAAK5B,eAAe,UACzC,MAEGkB,KAAU,IAAVA,EACC,IAACM,EAAgBP,IACfA,EAAa,IAAMA,EAAa,GAOpC,YANArC,EACE,QACA,2BACA,SAKJoC,EAAK1C,YAAc2C,EACnB,MAEGC,KAAU,IAAVA,GAAyB,IAAVA,EACdD,GAAAA,EAAWxB,OAAS,EAOtB,YANAb,EACE,QACA,gCACA,SAKJoC,EAAK1C,YAAc2C,EAIvB1D,GAAc,GAGhB,SAASiE,EAAgBvD,GAChB,MAAA,WAAW4D,KAAK5D,GA7RzBR,EAAKwB,UAAUC,IAAI,qBAEnB/B,EAAagB,QAAQ,SAAA2D,GACbC,IAAAA,EAAQjF,SAASY,cAAc,SAC/B2C,EAAQvD,SAASY,cAAc,SAIjCoE,GAFJC,EAAMzD,YAAcwD,EAAYxD,YAEA,WAA5BwD,EAAYxD,YAA0B,CAClCJ,IAAAA,EAASF,EAAa8D,GAK5B,OAHAC,EAAMxD,OAAOL,QACbT,EAAKc,OAAOwD,GAKkB,QAA5BD,EAAYxD,aACiB,WAA5BwD,EAAYxD,cACf+B,EAAMtB,KAAO,UAEfsB,EAAMtB,KAAO,OAEbsB,EAAM1B,KAAOmD,EAAYxD,YAAYG,cACrC4B,EAAM3B,UAAW,EACjB2B,EAAM7B,aAAa,UAAWsD,EAAYxD,YAAYG,eAEtDsD,EAAMxD,OAAO8B,GACb5C,EAAKc,OAAOwD,KAEdpE,EAAQW,YAAc,gBACtBb,EAAKc,OAAOZ,GACZd,EAAK0B,OAAOd,GAMZyC,EAAclD,GAEdE,EAAMiD,iBAAiB,QAAS,SAACC,GACzB4B,IAAAA,EAAS5B,EAAEG,OAAOC,QAAQ,MAC1BU,EAAQc,EAAOC,UACfC,EAAgBjF,EAAAA,EAAUG,iBAAiB,OAE7CE,IAAiB0E,GACnB3E,EAAY,EACZC,EAAe0E,GAEf3E,GAAaA,EAGI6E,EAAUC,KAAK,SAACC,EAAGC,GAChCC,IAAAA,EAASF,EAAEhF,iBAAiB,MAAM8D,GAAOqB,UACzCC,EAASH,EAAEjF,iBAAiB,MAAM8D,GAAOqB,UAOzCD,OALU,IAAVpB,IACFoB,EAAS1E,EAAgB0E,GACzBE,EAAS5E,EAAgB4E,IAGvBF,EAASE,GACHnF,EACCiF,EAASE,EACXnF,EAEA,IAIAc,QAAQ,SAAAsE,GACjBxF,EAAUsB,OAAOkE,OAIrBzF,EAAMmD,iBAAiB,QAAS,SAACC,GACzB8B,IAAAA,EAAgBjF,EAAAA,EAAUG,iBAAiB,YAC3CsF,EAAWtC,EAAEG,OAAOC,QAAQ,MAElC0B,EAAU/D,QAAQ,SAAAsE,GAAOA,OAAAA,EAAIxD,UAAUI,OAAO,YAC9CqD,EAASzD,UAAUC,IAAI,YAuFzBvB,EAAQwC,iBAAiB,QAAS,SAACC,GACjCA,EAAEuC,iBAEIpD,IAAAA,EAAOqD,OAAOC,YAAY,IAAIC,SAASrF,GAAMsF,WAEnDtF,EAAKuF,QAEA1D,EAA4BC,IAIjCM,EAAeN","file":"main.df4ac18a.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst body = document.querySelector('body');\nconst table = document.querySelector('table');\nconst tableBody = table.querySelector('tbody');\nconst thead = table.querySelector('thead');\nconst tableHeaders = thead.querySelectorAll('th');\n\nlet sortOrder = 1;\nlet activeHeader = null;\nlet currentCell = false;\nlet initialValue;\nconst offices = [\n  `Tokyo`,\n  `Singapore`,\n  `London`,\n  `New York`,\n  `Edinburgh`,\n  `San Francisco`,\n];\n\nconst form = document.createElement('form');\nconst saveBtn = document.createElement('button');\n\nform.classList.add('new-employee-form');\n\ntableHeaders.forEach(tableHeader => {\n  const label = document.createElement('label');\n  const input = document.createElement('input');\n\n  label.textContent = tableHeader.textContent;\n\n  if (tableHeader.textContent === 'Office') {\n    const select = createSelect(tableHeader);\n\n    label.append(select);\n    form.append(label);\n\n    return;\n  }\n\n  if (tableHeader.textContent === 'Age'\n    || tableHeader.textContent === 'Salary') {\n    input.type = 'number';\n  }\n  input.type = 'text';\n\n  input.name = tableHeader.textContent.toLowerCase();\n  input.required = true;\n  input.setAttribute('data-qa', tableHeader.textContent.toLowerCase());\n\n  label.append(input);\n  form.append(label);\n});\nsaveBtn.textContent = 'Save to table';\nform.append(saveBtn);\nbody.append(form);\n\nfunction normaliseNumber(num) {\n  return parseFloat(num.replace('$', '').replace(',', ''));\n};\n\neditTableCell(table);\n\nthead.addEventListener('click', (e) => {\n  const header = e.target.closest('TH');\n  const index = header.cellIndex;\n  const tableRows = [...tableBody.querySelectorAll('tr')];\n\n  if (activeHeader !== header) {\n    sortOrder = 1;\n    activeHeader = header;\n  } else {\n    sortOrder = -sortOrder;\n  }\n\n  const sortedRows = tableRows.sort((a, b) => {\n    let aValue = a.querySelectorAll('td')[index].innerText;\n    let bValue = b.querySelectorAll('td')[index].innerText;\n\n    if (index === 4) {\n      aValue = normaliseNumber(aValue);\n      bValue = normaliseNumber(bValue);\n    }\n\n    if (aValue < bValue) {\n      return -sortOrder;\n    } else if (aValue > bValue) {\n      return sortOrder;\n    } else {\n      return 0;\n    }\n  });\n\n  sortedRows.forEach(row => {\n    tableBody.append(row);\n  });\n});\n\ntable.addEventListener('click', (e) => {\n  const tableRows = [...tableBody.querySelectorAll('.active')];\n  const tableRow = e.target.closest('TR');\n\n  tableRows.forEach(row => row.classList.remove('active'));\n  tableRow.classList.add('active');\n});\n\nfunction createSelect(value) {\n  const select = document.createElement('select');\n\n  offices.forEach(office => {\n    const option = document.createElement('option');\n\n    option.value = office;\n    option.textContent = office;\n    select.append(option);\n  });\n\n  select.setAttribute('data-qa', value.textContent.toLowerCase());\n  select.required = true;\n  select.name = value.textContent.toLowerCase();\n\n  return select;\n}\n\nfunction notification(text, description, type) {\n  const message = document.createElement('div');\n\n  message.setAttribute('data-qa', 'notification');\n  message.classList.add('notification', type);\n\n  message.innerHTML = `\n    <h1>${text}</h1>\n    <p>${description}</p>\n  `;\n\n  document.body.append(message);\n\n  setTimeout(() => message.remove(), 4000);\n};\n\nfunction generateNotificationMessage(data) {\n  if (data.name.trim().length < 4 || data.position.trim().length < 4) {\n    notification(\n      'Error',\n      'Name and position should have at least 4 characters!',\n      'error'\n    );\n\n    return false;\n  };\n\n  if (data.age < 18 || data.age > 90) {\n    notification(\n      'Error',\n      'Age should be between 18 and 90 years!',\n      'error'\n    );\n\n    return false;\n  };\n\n  if (data.salary <= 0) {\n    notification(\n      'Error',\n      'Please enter valid salary amount!',\n      'error'\n    );\n\n    return false;\n  };\n\n  if (!data.age || !data.salary) {\n    notification(\n      'Error',\n      'Please fill all fields!',\n      'error'\n    );\n\n    return false;\n  };\n\n  notification(\n    'Sucess',\n    'Data successfully added to the table!',\n    'success'\n  );\n\n  return true;\n};\n\nsaveBtn.addEventListener('click', (e) => {\n  e.preventDefault();\n\n  const data = Object.fromEntries(new FormData(form).entries());\n\n  form.reset();\n\n  if (!generateNotificationMessage(data)) {\n    return;\n  }\n\n  addDataToTable(data);\n});\n\nfunction addDataToTable(data) {\n  const tr = document.createElement('tr');\n\n  tr.innerHTML = `\n    <td>${data.name}</td>\n    <td>${data.position}</td>\n    <td>${data.office}</td>\n    <td>${data.age}</td>\n    <td>$${Number(data.salary).toLocaleString('en-US')}</td>\n  `;\n\n  tableBody.appendChild(tr);\n};\n\nfunction editTableCell() {\n  tableBody.addEventListener('dblclick', (e) => {\n    const input = document.createElement('input');\n    const editedCell = e.target.closest('TD');\n\n    input.classList.add('cell-input');\n    input.style.width = '100%';\n    initialValue = e.target.textContent;\n    e.target.textContent = '';\n    currentCell = true;\n    editedCell.textContent = '';\n    editedCell.append(input);\n    input.focus();\n\n    input.addEventListener('keydown', (ev) => {\n      if (ev.key === 'Enter') {\n        setCellValue(input, editedCell);\n      };\n    });\n\n    input.addEventListener('blur', () => {\n      setCellValue(input, editedCell);\n    });\n  });\n};\n\nfunction setCellValue(tableInput, cell) {\n  if (!currentCell) {\n    return;\n  };\n\n  let inputValue = tableInput.value.trim();\n  const index = Array.from(cell.parentNode.children)\n    .indexOf(cell);\n\n  if (!inputValue) {\n    inputValue = initialValue;\n  }\n\n  switch (true) {\n    case index === 4:\n      if (!checkInputValue(inputValue)) {\n        notification(\n          'Error',\n          'Please enter a number',\n          'error'\n        );\n\n        return;\n      };\n\n      cell.textContent = inputValue.slice(0, 1) === '$'\n        ? `$${parseInt(inputValue\n          .split(',').join('').slice(1)).toLocaleString('en-US')}`\n        : `$${parseInt(inputValue\n          .split(',').join('')).toLocaleString('en-US')}`;\n      break;\n\n    case index === 3:\n      if (!checkInputValue(inputValue)\n        || (inputValue > 90 || inputValue < 18)) {\n        notification(\n          'Error',\n          'Please enter a valid age',\n          'error'\n        );\n\n        return;\n      };\n      cell.textContent = inputValue;\n      break;\n\n    case index !== 4 || index !== 3:\n      if (inputValue.length < 4) {\n        notification(\n          'Error',\n          'Must be at least 4 characters',\n          'error'\n        );\n\n        return;\n      };\n      cell.textContent = inputValue;\n      break;\n  }\n\n  currentCell = false;\n};\n\nfunction checkInputValue(value) {\n  return /^[0-9]+$/.test(value);\n};\n"]}